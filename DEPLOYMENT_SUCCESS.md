# ‚úÖ –î–ï–ü–õ–û–ô –ó–ê–í–ï–†–®–ï–ù –£–°–ü–ï–®–ù–û!

**–î–∞—Ç–∞**: 26 –¥–µ–∫–∞–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢
**URL**: https://aurelle.uz

---

## üéâ –ß–¢–û –°–î–ï–õ–ê–ù–û

### ‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
- **aurelle_app_1** - Node.js 20 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Ä—Ç 5000)
- **aurelle_postgres_1** - PostgreSQL 14 –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ—Ä—Ç 5432)

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- PostgreSQL 14 Alpine (–≤ Docker)
- –ë–∞–∑–∞: `aurelle`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `aurelle_user`
- –°—Ö–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ: `npm run db:push` ‚úì

### ‚úÖ Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ü—Ä–æ–∫—Å–∏ –Ω–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–ø–æ—Ä—Ç 5000)
- Gzip —Å–∂–∞—Ç–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è

### ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- Let's Encrypt SSL ‚úì
- HTTP ‚Üí HTTPS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç ‚úì
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ: **26 –º–∞—Ä—Ç–∞ 2026**
- –î–æ–º–µ–Ω—ã: `aurelle.uz`, `www.aurelle.uz`

### ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
```json
{
  "local": true,      // Email + Password ‚úì
  "yandex": true,     // Yandex OAuth ‚úì
  "google": true,     // Google OAuth ‚úì
  "github": false,    // GitHub OAuth (–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
  "phone": false      // Phone SMS (–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
}
```

---

## üîê –í–ê–ñ–ù–û: –û–ë–ù–û–í–ò–¢–ï OAUTH REDIRECT URIs

### Google OAuth Console
1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://console.cloud.google.com/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **APIs & Services** ‚Üí **Credentials**
3. –ù–∞–π–¥–∏—Ç–µ OAuth Client ID: `60089668488-9gvr0ahqda3neh2p3dsdvbofd39piguj...`
4. –ù–∞–∂–º–∏—Ç–µ **Edit**
5. –í **Authorized redirect URIs** –¥–æ–±–∞–≤—å—Ç–µ:
   ```
   https://aurelle.uz/api/auth/google/callback
   https://www.aurelle.uz/api/auth/google/callback
   ```
6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### Yandex OAuth
1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://oauth.yandex.ru/
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Client ID: `3b79a753092d49bb977ce1ec5b3017ec`)
3. –ù–∞–∂–º–∏—Ç–µ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å**
4. –í **Callback URI** –¥–æ–±–∞–≤—å—Ç–µ:
   ```
   https://aurelle.uz/api/auth/yandex/callback
   https://www.aurelle.uz/api/auth/yandex/callback
   ```
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

**–ü–û–°–õ–ï –≠–¢–û–ì–û OAuth –≤—Ö–æ–¥ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—Ç—å!**

---

## üìä –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
- ‚úÖ https://aurelle.uz - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ https://www.aurelle.uz - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ HTTP ‚Üí HTTPS —Ä–µ–¥–∏—Ä–µ–∫—Ç - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç - –≤–∞–ª–∏–¥–Ω—ã–π

### API endpoints
- ‚úÖ `/api/auth/providers` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `/api/auth/register` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `/api/auth/login` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ `/api/auth/google` - –≥–æ—Ç–æ–≤ (–¥–æ–±–∞–≤—å—Ç–µ redirect URI)
- ‚úÖ `/api/auth/yandex` - –≥–æ—Ç–æ–≤ (–¥–æ–±–∞–≤—å—Ç–µ redirect URI)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ PostgreSQL 14 –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –°—Ö–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üõ†Ô∏è –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@89.39.94.194

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
cd /var/www/aurelle
docker-compose ps

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose logs app -f

# –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose logs postgres -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
docker-compose restart app

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ
docker-compose down

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ
docker-compose up -d
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
cd /var/www/aurelle

# –ü–æ–ª—É—á–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å GitHub
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose up -d --build

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î (–µ—Å–ª–∏ –µ—Å—Ç—å)
docker-compose exec app npm run db:push
```

### Nginx
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Nginx
systemctl restart nginx

# –õ–æ–≥–∏ Nginx
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
certbot certificates

# –û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
certbot renew

# –¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
certbot renew --dry-run
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```bash
# –í–æ–π—Ç–∏ –≤ PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec postgres psql -U aurelle_user -d aurelle

# –ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec postgres pg_dump -U aurelle_user aurelle > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –±—ç–∫–∞–ø–∞
docker-compose exec -T postgres psql -U aurelle_user aurelle < backup.sql
```

---

## üîß –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú –° UBUNTU 16.04

### –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏:
1. ‚ùå Ubuntu 16.04 - —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (EOL)
2. ‚ùå GLIBC 2.23 - —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä–∞—è (–Ω—É–∂–Ω–∞ 2.25-2.28)
3. ‚ùå Node.js 20/18 –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è
4. ‚ùå PostgreSQL 9.5 –Ω–∞ –ø–æ—Ä—Ç—É 5433 - —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è
5. ‚ùå Vite —Ç—Ä–µ–±—É–µ—Ç Node.js 20+

### –†–µ—à–µ–Ω–∏–µ - Docker! ‚úÖ
- Node.js 20 Alpine –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- PostgreSQL 14 Alpine –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç —Ö–æ—Å—Ç-—Å–∏—Å—Ç–µ–º—ã
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–π –≤–µ—Ä—Å–∏–∏ Ubuntu (–¥–∞–∂–µ 16.04!)

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –ù–ê –°–ï–†–í–ï–†–ï

```
/var/www/aurelle/
‚îú‚îÄ‚îÄ Dockerfile              # Node.js 20 Alpine
‚îú‚îÄ‚îÄ docker-compose.yml      # Orchestration
‚îú‚îÄ‚îÄ package.json            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ dist/                   # –°–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ client/                 # React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ server/                 # Express –±—ç–∫–µ–Ω–¥
‚îî‚îÄ‚îÄ shared/                 # –û–±—â–∏–π –∫–æ–¥

/etc/nginx/
‚îî‚îÄ‚îÄ sites-available/
    ‚îî‚îÄ‚îÄ aurelle             # Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

/etc/letsencrypt/
‚îî‚îÄ‚îÄ live/
    ‚îî‚îÄ‚îÄ aurelle.uz/         # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
```

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–û–ë–ù–û–í–ò–¢–ï OAuth Redirect URIs** (—Å–º. –≤—ã—à–µ)
2. –û—Ç–∫—Ä–æ–π—Ç–µ https://aurelle.uz –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:
   - ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ email
   - ‚úÖ –í—Ö–æ–¥ —á–µ—Ä–µ–∑ email
   - ‚úÖ –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Google (–ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URIs)
   - ‚úÖ –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Yandex (–ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URIs)
   - ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–∞–ª–æ–Ω–æ–≤
   - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
   - ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ (EN/RU/UZ)

---

## üìû –î–ê–ù–ù–´–ï –î–û–°–¢–£–ü–ê

### –°–µ—Ä–≤–µ—Ä
```
IP:      89.39.94.194
–õ–æ–≥–∏–Ω:   root
–ü–∞—Ä–æ–ª—å:  w2@nT*6D
SSH:     ssh root@89.39.94.194
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–≤–Ω—É—Ç—Ä–∏ Docker)
```
Host:     postgres (–≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏)
Port:     5432
Database: aurelle
User:     aurelle_user
Password: w2@nT*6D
```

### URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```
Production: https://aurelle.uz
Alternative: https://www.aurelle.uz
```

---

## üéØ –ò–¢–û–ì

‚úÖ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
‚úÖ Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Email —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ OAuth –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ (–Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å Redirect URIs)

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

---

**–î–∞—Ç–∞ –¥–µ–ø–ª–æ—è**: 26 –¥–µ–∫–∞–±—Ä—è 2025
**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è**: ~40 –º–∏–Ω—É—Ç
**–ú–µ—Ç–æ–¥**: Docker (Node.js 20 + PostgreSQL 14)
**–°—Ç–∞—Ç—É—Å**: ‚úÖ SUCCESS
