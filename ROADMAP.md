# Product Roadmap - Beauty Salon Marketplace

## Текущая версия: MVP v1.0 ✅

---

## Фаза 1: MVP (ГОТОВО) ✅

### Backend ✅
- [x] JWT аутентификация
- [x] Трёхрольная система (client, salon_owner, admin)
- [x] CRUD салонов
- [x] CRUD услуг
- [x] CRUD записей (bookings)
- [x] CRUD отзывов
- [x] Рейтинги (автоматический пересчёт)
- [x] Базовая фильтрация и поиск
- [x] PostgreSQL + Alembic миграции
- [x] Docker Compose setup

### Frontend ✅
- [x] React + TypeScript + Vite
- [x] Tailwind CSS дизайн
- [x] Регистрация и логин
- [x] Три кабинета (client, salon, admin)
- [x] Поиск и фильтры салонов
- [x] Создание записей
- [x] История записей
- [x] Responsive design (PWA-ready)

### Документация ✅
- [x] README с инструкциями
- [x] QUICK_START гайд
- [x] ARCHITECTURE документация
- [x] API_EXAMPLES с curl запросами
- [x] .env.example

---

## Фаза 2: Core Features (Недели 1-4)

### Backend

#### Управление мастерами
- [ ] CRUD мастеров (`POST /api/masters`, `GET /api/masters`)
- [ ] Привязка мастеров к услугам (many-to-many)
- [ ] Портфолио мастера (фото работ)
- [ ] Расписание мастеров (`work_shifts`)

#### Календарь и слоты
- [ ] Генерация доступных слотов (`GET /api/masters/{id}/slots?date=2025-01-20`)
- [ ] Блокировка занятых слотов
- [ ] Автоматический расчёт end_at по длительности услуги
- [ ] Проверка пересечений при создании брони

#### Загрузка файлов
- [ ] S3-совместимое хранилище (MinIO/AWS S3)
- [ ] Эндпоинт `POST /api/upload` (логотипы, фото)
- [ ] Валидация размера и типов файлов
- [ ] CDN интеграция (опционально)

### Frontend

#### Календарь записи
- [ ] UI выбора даты (date picker)
- [ ] Отображение доступных слотов мастера
- [ ] Подсветка занятых/свободных слотов
- [ ] Мгновенная валидация выбора

#### Управление мастерами (для салонов)
- [ ] Страница `/salon/masters`
- [ ] Добавление нового мастера
- [ ] Редактирование профиля мастера
- [ ] Управление расписанием (график работы)

#### Загрузка фото
- [ ] Upload компонент (drag & drop)
- [ ] Превью перед загрузкой
- [ ] Прогресс-бар загрузки
- [ ] Обрезка и оптимизация изображений

### Геолокация и карты

#### Backend
- [ ] Индексы для latitude/longitude в БД
- [ ] Оптимизированный haversine расчёт
- [ ] Геокодинг адресов (Yandex Maps API / Google Maps)

#### Frontend
- [ ] Интеграция карты (Yandex Maps / Google Maps)
- [ ] Показать салоны на карте
- [ ] Фильтр "Рядом со мной" (geolocation API)
- [ ] Отображение расстояния до салона

---

## Фаза 3: Notifications & Payments (Недели 5-8)

### Уведомления

#### Backend
- [ ] Celery workers setup
- [ ] Redis queue конфигурация
- [ ] Задачи напоминаний (T-24h, T-2h до визита)
- [ ] Email уведомления (SMTP)
- [ ] SMS уведомления (Twilio / local provider)
- [ ] Telegram Bot интеграция
- [ ] Push notifications (опционально)

#### Frontend
- [ ] Настройки уведомлений в профиле
- [ ] Подписка на push (Service Worker)

### Платежи

#### Backend
- [ ] Интеграция Payme API
- [ ] Интеграция Click API
- [ ] Webhook обработка `POST /api/payments/callback`
- [ ] Логирование транзакций
- [ ] Возвраты (refunds)

#### Frontend
- [ ] Страница оплаты (`/payment/{booking_id}`)
- [ ] Выбор метода оплаты
- [ ] Redirect на платёжный шлюз
- [ ] Обработка success/fail redirects

### Политика отмен

#### Backend
- [ ] Конфигурируемые правила отмены (по салону)
- [ ] Депозит/предоплата (частичная оплата)
- [ ] Штрафы за no-show
- [ ] Чёрный список клиентов (автоматический бан после N no-show)

#### Frontend
- [ ] Отображение политики отмены при бронировании
- [ ] Предупреждение перед отменой
- [ ] Таймер отмены (осталось X часов до штрафа)

---

## Фаза 4: Advanced Features (Недели 9-12)

### Категории и фильтры

#### Backend
- [ ] Таблица `categories` (иерархия категорий)
- [ ] Теги и метки (tags)
- [ ] Фильтрация по множественным параметрам

#### Frontend
- [ ] Многоуровневые фильтры
- [ ] Автодополнение при поиске
- [ ] Сохранённые фильтры ("Мои предпочтения")

### Промокоды и акции

#### Backend
- [ ] Таблица `promo_codes`
- [ ] Валидация промокодов при бронировании
- [ ] Скидки (процент/фиксированная сумма)
- [ ] Ограничения (срок действия, лимит использований)
- [ ] Спец. предложения от салонов

#### Frontend
- [ ] Поле для ввода промокода
- [ ] Отображение активных акций салона
- [ ] Баннеры с промо

### Аналитика для салонов

#### Backend
- [ ] Эндпоинты `/api/analytics/salon/{id}/stats`
- [ ] Отчёты по записям (за день/неделю/месяц)
- [ ] ТОП-мастера по записям
- [ ] Динамика рейтинга
- [ ] Выручка по услугам

#### Frontend
- [ ] Страница `/salon/analytics`
- [ ] Графики (Chart.js / Recharts)
- [ ] Экспорт в CSV/PDF

### Чат клиент ↔ салон

#### Backend
- [ ] WebSocket сервер (FastAPI WebSocket)
- [ ] Таблица `messages`
- [ ] История переписки
- [ ] Уведомления о новых сообщениях

#### Frontend
- [ ] Компонент чата (realtime)
- [ ] Индикатор "печатает..."
- [ ] Загрузка файлов в чате

---

## Фаза 5: Mobile & Scale (Недели 13-16)

### Мобильное приложение

- [ ] React Native setup
- [ ] Общая кодовая база с веб-версией (shared API layer)
- [ ] Нативные push notifications
- [ ] Публикация в App Store / Google Play

### PWA улучшения

- [ ] Service Worker для офлайн-режима
- [ ] Кеширование страниц
- [ ] Add to Home Screen промпт
- [ ] Manifest.json

### Производительность

#### Backend
- [ ] Индексы БД (анализ slow queries)
- [ ] Redis кеширование (списки салонов, услуг)
- [ ] Connection pooling (pgbouncer)
- [ ] Pagination улучшения (cursor-based)

#### Frontend
- [ ] Lazy loading компонентов
- [ ] Image lazy loading
- [ ] Code splitting
- [ ] Bundle size оптимизация

### Масштабирование

- [ ] Horizontal scaling (multiple backend instances)
- [ ] PostgreSQL replication (read replicas)
- [ ] CDN для статики
- [ ] Load balancing (Nginx/HAProxy)

---

## Фаза 6: Enterprise & Ecosystem (Недели 17-24)

### Админ-панель (расширенная)

- [ ] Dashboard с метриками
- [ ] Модерация салонов (approve/reject)
- [ ] Модерация отзывов (удаление/скрытие)
- [ ] Управление пользователями (блокировка)
- [ ] Логи активности
- [ ] Настройки платформы

### Реферальная программа

- [ ] Таблица `referrals`
- [ ] Уникальные реферальные коды
- [ ] Бонусы за приглашение
- [ ] Отслеживание конверсий

### Партнёрская программа

- [ ] API для партнёров (виджеты записи)
- [ ] Affiliate dashboard
- [ ] Комиссии партнёрам

### Мультиязычность

- [ ] i18n библиотека (react-i18next)
- [ ] Переводы (русский, узбекский, английский)
- [ ] Переключатель языка

### CMS для блога

- [ ] Статьи о красоте
- [ ] SEO оптимизация
- [ ] Связь статей с услугами

---

## Метрики успеха (KPI)

### MVP (Фаза 1)
- [x] Проект запускается локально
- [x] 3 роли работают корректно
- [x] Можно создать салон → услугу → запись → отзыв

### Фаза 2
- [ ] 20+ активных салонов
- [ ] 100+ записей в месяц
- [ ] 50+ отзывов

### Фаза 3
- [ ] 10% записей с онлайн-оплатой
- [ ] 80% клиентов получают напоминания
- [ ] No-show < 15%

### Фаза 4
- [ ] 500+ пользователей
- [ ] 100+ салонов
- [ ] Средний рейтинг салонов > 4.0

### Фаза 5
- [ ] Мобильное приложение в сторах
- [ ] 1000+ скачиваний
- [ ] Время отклика API < 200ms (p95)

### Фаза 6
- [ ] 5000+ пользователей
- [ ] 500+ салонов
- [ ] Рост 20% месяц к месяцу

---

## Приоритизация фич (MoSCoW)

### Must Have (обязательно)
- Календарь мастеров
- Загрузка фото
- Уведомления (SMS/Email)
- Онлайн платежи

### Should Have (важно)
- Геолокация на карте
- Промокоды
- Аналитика для салонов
- Политика отмен

### Could Have (желательно)
- Чат клиент-салон
- Мобильное приложение
- Реферальная программа
- Блог/CMS

### Won't Have (не сейчас)
- AI рекомендации
- Виртуальная примерка (AR)
- Интеграция с соцсетями (Instagram, TikTok)

---

## Технический долг

- [ ] Тесты (pytest для backend, vitest для frontend)
- [ ] CI/CD pipeline (GitHub Actions / GitLab CI)
- [ ] Мониторинг (Prometheus + Grafana)
- [ ] Error tracking (Sentry)
- [ ] Logging (structured logs)
- [ ] Security audit
- [ ] Performance benchmarks

---

## Release План

| Версия | Дата выхода | Основные фичи                          |
|--------|-------------|----------------------------------------|
| v1.0   | ✅ Готово   | MVP (auth, салоны, записи, отзывы)     |
| v1.1   | Неделя 4    | Мастера, календарь, фото               |
| v1.2   | Неделя 8    | Уведомления, платежи, политика отмен   |
| v2.0   | Неделя 12   | Промокоды, аналитика, чат              |
| v2.1   | Неделя 16   | Мобильное приложение, PWA              |
| v3.0   | Неделя 24   | Enterprise фичи, партнёрская программа |

---

**Следующий шаг:** начать Фазу 2 — управление мастерами и календарь.
