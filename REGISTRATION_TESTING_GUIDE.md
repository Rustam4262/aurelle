# üß™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 01 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ‚úÖ
```sql
DELETE FROM users;    -- –£–¥–∞–ª–µ–Ω–æ 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
DELETE FROM sessions; -- –û—á–∏—â–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ —Å–µ—Å—Å–∏–∏
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–∏—Å—Ç–∞—è, –º–æ–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –ª—é–±—ã–º email.

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è ‚úÖ

**–ù–æ–≤—ã–π API endpoint:** `POST /api/auth/reset-password`

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
```bash
curl -X POST https://aurelle.uz/api/auth/reset-password \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "newPassword": "NewPassword123"
  }'
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `email` - Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `newPassword` - –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤)

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- Endpoint –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ email –≤ —Å–∏—Å—Ç–µ–º–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ bcrypt rounds —á—Ç–æ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (12)
- –ó–∞—â–∏—â–µ–Ω rate limiter'–æ–º

### 3. –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω ‚úÖ

**–ö–æ–º–º–∏—Ç:** `aeb11544` - Add password reset endpoint for user account recovery

**–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞:**
```
‚úÖ aurelle_app_1 - Up (port 5000)
‚úÖ aurelle_postgres_1 - Up (port 5432)
‚úÖ Auth system initialized
‚úÖ Local auth configured successfully
‚úÖ Serving on https://aurelle.uz
```

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

### –¢–µ—Å—Ç 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º email

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://aurelle.uz/auth
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Email"
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" (—Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É)
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   ```
   Email: test@example.com
   Password: Password123 (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤)
   Confirm Password: Password123
   ```
5. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç"
6. ‚úÖ –î–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –∏ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

### –¢–µ—Å—Ç 2: –ü–æ–ø—ã—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º email

1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –µ—â–µ —Ä–∞–∑ —Å —Ç–µ–º –∂–µ email
2. ‚ùå –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É: "User with this email already exists"

### –¢–µ—Å—Ç 3: –í—Ö–æ–¥ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–í—Ö–æ–¥"
2. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
   ```
   Email: test@example.com
   Password: Password123
   ```
3. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏"
4. ‚úÖ –î–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

### –¢–µ—Å—Ç 4: –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è (—á–µ—Ä–µ–∑ API)

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
   ```bash
   curl -X POST https://aurelle.uz/api/auth/reset-password \
     -H "Content-Type: application/json" \
     -d '{
       "email": "test@example.com",
       "newPassword": "NewPassword456"
     }'
   ```
3. ‚úÖ –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `{"success": true, "message": "Password has been reset successfully"}`

4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º –ø–∞—Ä–æ–ª–µ–º:
   - Email: test@example.com
   - Password: Password123
   - ‚ùå –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É: "Invalid email or password"

5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º:
   - Email: test@example.com
   - Password: NewPassword456
   - ‚úÖ –î–æ–ª–∂–Ω–æ —É—Å–ø–µ—à–Ω–æ –≤–æ–π—Ç–∏

### –¢–µ—Å—Ç 5: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è

1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –∫–æ—Ä–æ—Ç–∫–∏–º –ø–∞—Ä–æ–ª–µ–º:
   ```
   Email: test2@example.com
   Password: 123 (–º–µ–Ω—å—à–µ 8 —Å–∏–º–≤–æ–ª–æ–≤)
   ```
2. ‚ùå –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É: "Password must be at least 8 characters"

### –¢–µ—Å—Ç 6: –°–µ—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
2. –ó–∞–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
3. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä —Å–Ω–æ–≤–∞
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://aurelle.uz
5. ‚úÖ –î–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–º–∏ (—Å–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –Ω–∞ 30 –¥–Ω–µ–π)

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
```sql
SELECT COUNT(*) FROM users;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 0 (–±–∞–∑–∞ —á–∏—Å—Ç–∞—è)
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ email –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
–õ—é–±—ã–µ! –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–∞. –ú–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- test@example.com
- user@test.com
- admin@aurelle.uz
- roziyev18r@gmail.com (–≤–∞—à –ø—Ä–µ–¥—ã–¥—É—â–∏–π email - —Ç–µ–ø–µ—Ä—å —Å–≤–æ–±–æ–¥–µ–Ω)
- –ª—é–±–æ–π –¥—Ä—É–≥–æ–π email

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "User with this email already exists"

**–ü—Ä–∏—á–∏–Ω–∞:** Email —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–†–µ—à–µ–Ω–∏–µ 1:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π email –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ 2:** –í–æ–π—Ç–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º (–µ—Å–ª–∏ –ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å)

**–†–µ—à–µ–Ω–∏–µ 3:** –°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ API:
```bash
curl -X POST https://aurelle.uz/api/auth/reset-password \
  -H "Content-Type: application/json" \
  -d '{
    "email": "roziyev18r@gmail.com",
    "newPassword": "YourNewPassword123"
  }'
```

**–†–µ—à–µ–Ω–∏–µ 4 (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):** –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ë–î:
```bash
ssh root@89.39.94.194
docker-compose -f /var/www/aurelle/docker-compose.yml exec -T postgres \
  psql -U aurelle_user -d aurelle \
  -c "DELETE FROM users WHERE email = 'email@example.com';"
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Password must be at least 8 characters"

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–∞—Ä–æ–ª—å —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å –º–∏–Ω–∏–º—É–º –∏–∑ 8 —Å–∏–º–≤–æ–ª–æ–≤.

### –ü—Ä–æ–±–ª–µ–º–∞: "Invalid email or password"

**–ü—Ä–∏—á–∏–Ω–∞ 1:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è –∏–ª–∏ —Å–±—Ä–æ—Å—å—Ç–µ –µ–≥–æ

**–ü—Ä–∏—á–∏–Ω–∞ 2:** Email –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
**–†–µ—à–µ–Ω–∏–µ:** –°–Ω–∞—á–∞–ª–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å

### –ü—Ä–æ–±–ª–µ–º–∞: 429 Too Many Requests

**–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –æ–¥–Ω–æ–≥–æ IP

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–¥–æ–∂–¥–∏—Ç–µ 15 –º–∏–Ω—É—Ç –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```bash
ssh root@89.39.94.194
docker-compose -f /var/www/aurelle/docker-compose.yml restart app
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–µ–π—á–∞—Å —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ API. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞.

### 2. –î–æ–±–∞–≤–∏—Ç—å email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–∏—Å—å–º–æ —Å —Å—Å—ã–ª–∫–æ–π –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.

### 3. –î–æ–±–∞–≤–∏—Ç—å –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

2FA —á–µ—Ä–µ–∑ SMS –∏–ª–∏ authenticator app.

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å OAuth Redirect URIs

–û–±–Ω–æ–≤–∏—Ç—å redirect URIs –¥–ª—è Google –∏ Yandex OAuth:
- Google: `https://aurelle.uz/api/auth/google/callback`
- Yandex: `https://aurelle.uz/api/auth/yandex/callback`

---

## üìù API Endpoints

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```http
POST /api/auth/register
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "Password123",
  "firstName": "John",
  "lastName": "Doe"
}
```

### –í—Ö–æ–¥
```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "user@example.com",
  "password": "Password123"
}
```

### –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
```http
POST /api/auth/reset-password
Content-Type: application/json

{
  "email": "user@example.com",
  "newPassword": "NewPassword456"
}
```

### –í—ã—Ö–æ–¥
```http
POST /api/auth/logout
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
```http
GET /api/auth/user
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –Ω–æ–≤—ã–º email —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å —Ç–µ–º –∂–µ email –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- [ ] –í—Ö–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –í—Ö–æ–¥ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è (8+ —Å–∏–º–≤–æ–ª–æ–≤) —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ API —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–µ—Å—Å–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- [ ] –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–Å –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

**–°–µ—Ä–≤–µ—Ä:** https://aurelle.uz
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –û—á–∏—â–µ–Ω–∞, –≥–æ—Ç–æ–≤–∞ –∫ –Ω–æ–≤—ã–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è–º
**Password Reset:** –î–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ API

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 01 —è–Ω–≤–∞—Ä—è 2026, 11:20 UTC
